angular.module('optionDesigner').service('optionDesignerService', ['$http', function($http) {
    
    const gridSpacing = 25;
    
    const baseUrl = '/vvsg/rest/ballot-designer/ballot/';
    
    this.testHash = function(password) {
        return $http({
            method: "GET",
            url: '/ssp/rest/util/passwordHash',
            params: {
                password: password
            }
//            headers: {
//                'Accept':       'application/json',
//                'Content-Type': 'application/json'
//            }
        });
    }
    
    this.test = function() {
        console.log("TEST!");
        return $http({
            url: '/ballot-designer/rs/ping',
            method : 'GET',
            params : {}
        });
    }
    
    this.saveBallotTemplate = function(name, type, definition) {
        return $http({
//            url: '/ballot-designer/rs/templates',
            url: baseUrl + 'templates',
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            data : definition,
            params: {
                name: name,
                type: type
            }
        })
    }
    
    this.getBallotTemplatesList = function() {
        return $http({
//            url: '/ballot-designer/rs/templates',
            url: baseUrl + 'templates',
            method : 'GET',
            params : {}
        });
    }
    
    this.getBallotTemplate = function(templateCode) {
        return $http({
//            url: '/ballot-designer/rs/templates/' + templateCode,
            url: baseUrl + 'templates/' + templateCode,
            method : 'GET'
        });
    }
    

    this.getContainers = function() {
        let n = 1;
        const mockData = [
            {
                "id"              : n++,
                "name"            : "Contest template old",
                "value"           : "contestTemplate",
                "src"             : "http://placehold.it/32x32/F7D08A",
                "renderOptions"   : [
                    {ctype: 'rect', left: 0, top: 0, width: gridSpacing * 8, height: gridSpacing * 1, fill: "#EBEBEB"},
                    {ctype: 'rect', left: 0, top: gridSpacing * 1, width: gridSpacing * 8, height: gridSpacing * 1, 
                        fill: "#CAE4FF"},
                    {ctype: 'rect', left: 0, top: gridSpacing * 2, width: gridSpacing * 8, height: gridSpacing * 2,
                        fill: "#FFFFFF", subtype: "ballotOption"},
                    {ctype: 'rect', left: 0, top: gridSpacing * 4, width: gridSpacing * 8, height: gridSpacing * 2, 
                        fill: "#FFFFFF", subtype: "writeIn"},
                    {ctype: 'textbox', left: 2, top: 5, fontSize: 12, fontWeight: 'bold', text: '${contest.name}'},
                    {ctype: 'textbox', left: 2, top: (gridSpacing * 1) + 5, fontSize: 12, text: 'Vote for ${contest.maxVotes}'},
                    {ctype: 'mark', left: 0, top: gridSpacing * 2, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'textbox', left: (gridSpacing * 1) + 2, top: gridSpacing * 2 + 5, fontSize: 14, text: '${nomination.name}'},
                    {ctype: 'textbox', left: (gridSpacing * 1) + 2, top: gridSpacing * 3, fontSize: 12, text: '${party.name}'},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 4 - 5, width: gridSpacing * 7, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"},
                    {ctype: 'mark', left: 0, top: gridSpacing * 4, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'text', left: (gridSpacing * 1) + 2, top: gridSpacing * 4 + 5, fontSize: 14, text: 'or write-in:'},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 6 - 5, width: gridSpacing * 7, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"}
                ],
                "backgroundColor" : "#F7D08A"
                
            },
            {
                "id"              : n++,
                "name"            : "Contest template",
                "value"           : "contestTemplate",
                "src"             : "http://placehold.it/32x32/F7D08A",
                "renderOptions"   : [
                    {ctype: 'rect', left: 0, top: 0, width: gridSpacing * 6, height: gridSpacing * 1, fill: '#f3f3f3', stackable: true, subtype: 'title'},
                    {ctype: 'textbox', left: 2, top: 5, width: gridSpacing * 6 - 4, fontSize: 12, fontWeight: 'bold', text: '${contest.name}', 
                    	customData: {display: 'Contest title', contentType: 'title'}},
                    {ctype: 'rect', left: 0, top: gridSpacing * 1, width: gridSpacing * 6, height: gridSpacing * 1, 
                        fill: "#d9ecff", stackable: true, subtype: 'instructions'},
                    {ctype: 'textbox', left: 2, top: (gridSpacing * 1) + 5, fontSize: 12, text: 'Vote for ${contest.maxVotes}', width: gridSpacing * 6 - 4,
                    	customData: {display: 'Template instructions', contentType: 'instructions'}},
                    {ctype: 'rect', left: 0, top: gridSpacing * 2, width: gridSpacing * 6, height: gridSpacing * 2,
                        fill: "#ffffff", stackable: true, subtype: "ballotOption"},
                    {ctype: 'rect', left: 0, top: gridSpacing * 4, width: gridSpacing * 6, height: gridSpacing * 2, 
                        fill: "#ffffff", stackable: true, subtype: "writeIn"},
                    {ctype: 'mark', left: 0, top: gridSpacing * 2, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'textbox', left: (gridSpacing * 1) + 2, top: gridSpacing * 2 + 5, width: gridSpacing * 5 - 4, 
                    	fontSize: 12, fontWeight: 'bold', text: '${nomination.name}',
                    	customData: {display: 'Candidate name', contentType: 'candidate'}},
                    {ctype: 'textbox', left: (gridSpacing * 1) + 2, top: gridSpacing * 3, width: gridSpacing * 5 - 4, 
                		fontSize: 12, text: '${party.name}',
                    	customData: {display: 'Party name', contentType: 'party'}},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 4 - 5, width: gridSpacing * 5 - 1, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"},
                    {ctype: 'mark', left: 0, top: gridSpacing * 4, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'text', left: (gridSpacing * 1) + 2, top: gridSpacing * 4 + 5, fontSize: 12, fontWeight: 'bold', text: 'or write-in'},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 6 - 5, width: gridSpacing * 5 - 1, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"}
                ],
                "backgroundColor" : "#F7D08A"
            },
            {
                "id"              : n++,
                "name"            : "Contest template7",
                "value"           : "contestTemplate",
                "src"             : "http://placehold.it/32x32/F7D08A",
                "renderOptions"   : [
                    {ctype: 'rect', left: 0, top: 0, width: gridSpacing * 7, height: gridSpacing * 1, fill: '#f3f3f3', stackable: true, subtype: 'title'},
                    {ctype: 'textbox', left: 2, top: 5, width: gridSpacing * 7 - 4, fontSize: 12, fontWeight: 'bold', text: '${contest.name}', 
                    	customData: {display: 'Contest title', contentType: 'title'}},
                    {ctype: 'rect', left: 0, top: gridSpacing * 1, width: gridSpacing * 7, height: gridSpacing * 1, 
                        fill: "#d9ecff", stackable: true, subtype: 'instructions'},
                    {ctype: 'textbox', left: 2, top: (gridSpacing * 1) + 5, width: gridSpacing * 7 - 4, fontSize: 12, text: 'Vote for ${contest.maxVotes}',
                    	customData: {display: 'Template instructions', contentType: 'instructions'}},
                    {ctype: 'rect', left: 0, top: gridSpacing * 2, width: gridSpacing * 7, height: gridSpacing * 2,
                        fill: "#ffffff", stackable: true, subtype: "ballotOption"},
                    {ctype: 'rect', left: 0, top: gridSpacing * 4, width: gridSpacing * 7, height: gridSpacing * 2, 
                        fill: "#ffffff", stackable: true, subtype: "writeIn"},
                    {ctype: 'mark', left: 0, top: gridSpacing * 2, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'textbox', left: (gridSpacing * 1) + 2, top: gridSpacing * 2 + 5, width: gridSpacing * 6 - 4, 
                    	fontSize: 12, fontWeight: 'bold', text: '${nomination.ballotName}',
                    	customData: {display: 'Candidate name', contentType: 'candidate'}},
                    {ctype: 'textbox', left: (gridSpacing * 1) + 2, top: gridSpacing * 3, width: gridSpacing * 6 - 4, 
                		fontSize: 12, text: '${party.name}',
                    	customData: {display: 'Party name', contentType: 'party'}},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 4 - 5, width: gridSpacing * 6 - 1, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"},
                    {ctype: 'mark', left: 0, top: gridSpacing * 4, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'text', left: (gridSpacing * 1) + 2, top: gridSpacing * 4 + 5, fontSize: 12, fontWeight: 'bold', text: 'or write-in'},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 6 - 5, width: gridSpacing * 6 - 1, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"}
                ],
                "backgroundColor" : "#F7D08A"
            },
            {
                "id"              : n++,
                "name"            : "Contest template R",
                "value"           : "contestTemplate",
                "src"             : "http://placehold.it/32x32/F7D08A",
                "renderOptions"   : [
                	{ctype: 'rect', left: 0, top: 0, width: gridSpacing * 7, height: gridSpacing * 1, fill: '#e3e3e3', stackable: true, subtype: 'header'},
                	{ctype: 'textbox', left: 2, top: 5, width: gridSpacing * 7 - 4, fontSize: 12, fontWeight: 'bold', text: '${contestHeader.text}', 
                    	customData: {display: 'Contest group header', contentType: 'header'}},
                    {ctype: 'rect', left: 0, top: gridSpacing * 1, width: gridSpacing * 7, height: gridSpacing * 1, fill: '#f3f3f3', stackable: true, subtype: 'title'},
                    {ctype: 'textbox', left: 2, top: (gridSpacing * 1) + 5, width: gridSpacing * 7 - 4, fontSize: 12, fontWeight: 'bold', text: '${contest.name}', 
                    	customData: {display: 'Contest title', contentType: 'title'}},
                    {ctype: 'rect', left: 0, top: gridSpacing * 2, width: gridSpacing * 7, height: gridSpacing * 1, 
                        fill: "#d9ecff", stackable: true, subtype: 'instructions'},
                    {ctype: 'textbox', left: 2, top: (gridSpacing * 2) + 5, width: gridSpacing * 7 - 4, fontSize: 12, text: 'Vote for ${contest.maxVotes}',
                    	customData: {display: 'Template instructions', contentType: 'instructions'}},
                    {ctype: 'rect', left: 0, top: gridSpacing * 3, width: gridSpacing * 7, height: gridSpacing * 2,
                        fill: "#ffffff", stackable: true, subtype: "ballotOption"},
                    {ctype: 'rect', left: 0, top: gridSpacing * 5, width: gridSpacing * 7, height: gridSpacing * 2, 
                        fill: "#ffffff", stackable: true, subtype: "writeIn"},
                    {ctype: 'mark', left: 0, top: gridSpacing * 3, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'textbox', left: (gridSpacing * 1) + 2, top: gridSpacing * 3 + 5, width: gridSpacing * 6 - 4, 
                    	fontSize: 12, fontWeight: 'bold', text: '${nomination.ballotName}',
                    	customData: {display: 'Candidate name', contentType: 'candidate'}},
                    {ctype: 'textbox', left: (gridSpacing * 1) + 2, top: gridSpacing * 4, width: gridSpacing * 6 - 4, 
                		fontSize: 12, text: '${party.name}',
                    	customData: {display: 'Party name', contentType: 'party'}},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 5 - 5, width: gridSpacing * 6 - 1, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"},
                    {ctype: 'mark', left: 0, top: gridSpacing * 5, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'text', left: (gridSpacing * 1) + 2, top: gridSpacing * 5 + 5, fontSize: 12, fontWeight: 'bold', text: 'or write-in'},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 7 - 5, width: gridSpacing * 6 - 1, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"}
                ],
                "backgroundColor" : "#F7D08A"
            },
            {
                "id"              : n++,
                "name"            : "Trio template",
                "value"           : "contestTemplate",
                "src"             : "http://placehold.it/32x32/F7D08A",
                "renderOptions"   : [
                    {ctype: 'rect', left: 0, top: 0, width: gridSpacing * 8, height: gridSpacing * 1, fill: "#EBEBEB"},
                    {ctype: 'rect', left: 0, top: gridSpacing * 1, width: gridSpacing * 8, height: gridSpacing * 1, 
                        fill: "#CAE4FF"},
                    {ctype: 'rect', left: 0, top: gridSpacing * 2, width: gridSpacing * 8, height: gridSpacing * 4,
                        fill: "#FFFFFF", subtype: "ballotOption"},
                    {ctype: 'rect', left: 0, top: gridSpacing * 6, width: gridSpacing * 8, height: gridSpacing * 4, 
                        fill: "#FFFFFF", subtype: "writeIn"},
                    {ctype: 'text', left: 5, top: 5, fontSize: 16, fontWeight: 'bold', text: '${contest.name}'},
                    {ctype: 'text', left: 5, top: (gridSpacing * 1) + 5, fontSize: 14, text: 'Vote for ${contest.maxVotes}'},
                    {ctype: 'mark', left: 0, top: gridSpacing * 2, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'text', left: (gridSpacing * 1) + 0, top: gridSpacing * 2 + 5, fontSize: 14, text: '${nomination.name}'},
                    {ctype: 'text', left: (gridSpacing * 1) + 1, top: gridSpacing * 5 - 10, fontSize: 12, text: '${party.name}'},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 6 - 5, width: gridSpacing * 7, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"},
                    {ctype: 'mark', left: 0, top: gridSpacing * 6, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'text', left: (gridSpacing * 1) + 5, top: gridSpacing * 6 + 5, fontSize: 14, text: 'or write-in:'},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 8 - 5, width: gridSpacing * 7, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 9 - 5, width: gridSpacing * 7, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 10 - 5, width: gridSpacing * 7, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"}
                ],
                "backgroundColor" : "#F7D08A"
                
            },
            {
                "id"              : n++,
                "name"            : "Issue template",
                "value"           : "contestTemplate",
                "src"             : "http://placehold.it/32x32/F7D08A",
                "renderOptions"   : [
                    {ctype: 'rect', left: 0, top: 0, width: gridSpacing * 24, height: gridSpacing * 1, fill: "#EBEBEB"},
                    {ctype: 'textbox', left: 0, top: 4, width: gridSpacing * 24, fontSize: 12, fontFamily: 'Arial', fontWeight: 'bold', 
                        text: '${contest.name}'},
                    {ctype: 'rect', left: 0, top: gridSpacing * 1, width: gridSpacing * 24, height: gridSpacing * 1, 
                        fill: "#CAE4FF"},
                    {ctype: 'text', left: 2, top: (gridSpacing * 1) + 5, fontSize: 12, fontFamily: 'Arial', fontWeight: 'bold', 
                        text: 'Vote yes or no'},
                    {ctype: 'rect', left: 0, top: gridSpacing * 2, width: gridSpacing * 24, height: gridSpacing * 13,
                        fill: "#FFFFFF"},
                    {ctype: 'text', left: 2, top: (gridSpacing * 2) + 5, fontSize: 12, fontFamily: 'Arial', 
                        text: 'Amendment text'},
                    {ctype: 'rect', left: 0, top: gridSpacing * 15, width: gridSpacing * 24, height: gridSpacing * 1, 
                        fill: "#FFFFFF", subtype: "ballotOption"},
                    {ctype: 'mark', left: 0, top: gridSpacing * 15, width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Oval"},
                    {ctype: 'textbox', left: (gridSpacing * 1) + 0, top: gridSpacing * 15 + 4, width: gridSpacing * 22, fontSize: 12, fontWeight: 'bold', 
                        text: '${nomination.name}'},
                    {ctype: 'separationLine', left: gridSpacing, top: gridSpacing * 16 - 5, width: gridSpacing * 23, 
                        stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"}
                ],
                "backgroundColor" : "#F7D08A"
                
            },
            {
                "id"              : n++,
                "name"            : "Contest Header",
                "value"           : "contestClass",
                "src"             : "http://placehold.it/32x32/F7D08A",
                "renderOptions"   : {left: 0, top: 0, width: gridSpacing * 12, height: gridSpacing * 1, fill: "#F7D08A", opacity: 1},
                "backgroundColor" : "#F7D08A"
                
            },
            {
                "id"              : n++,
                "name"            : "Ballot Option",
                "value"           : "ballotOption",
                "src"             : "http://placehold.it/32x32/87B6A7",
                "renderOptions"   : {left: 0, top: gridSpacing * 1, width: gridSpacing * 6, height: gridSpacing * 2, 
                                    fill: "#87B6A7", subtype: "ballotOption"},
                "backgroundColor" : "#87B6A7"
            },
            {
                "id"              : n++,
                "name"            : "Write-In",
                "value"           : "writeIn",
                "src"             : "http://placehold.it/32x32/87B6A7",
                "renderOptions"   : {left: 0, top: gridSpacing * 3, width: gridSpacing * 6, height: gridSpacing * 2, 
                                    fill: "#87B6A7", subtype: "writeIn"},
                "backgroundColor" : "#87B6A7"
            }
            ];
        return mockData;
    }
    
    this.getBallotOptionComponents = function() {
        let n = 1;
        const mockData = [
            {
                "id"              : n++,
                "name"            : "Candidate Name",
                "value"           : "${nomination.name}",
                "type"            : "textbox",
                "src"             : "images/txt32.png",
                "renderOptions"   : {fontSize: 12},
                "backgroundColor" : "#E3F09B"
            },
            {
                "id"              : n++,
                "name"            : "Party Name",
                "value"           : "${party.name}",
                "type"            : "textbox",
                "src"             : "images/txt32.png",
                "renderOptions"   : {fontSize: 12},
                "backgroundColor" : "#87B6A7"
            },
            {
                "id"              : n++,
                "name"            : "Candidate Image",
                "value"           : "$candidateImage",
                "type"            : "rect",
                "src"             : "images/silueta32.png",
                "renderOptions"   : {"width" : gridSpacing * 2, "height" : gridSpacing * 2, "fill": "#F7D08A"},
                "backgroundColor" : "#F7D08A"
            },
            {
                "id"              : n++,
                "name"            : "Party Image",
                "value"           : "$partyImage",
                "type"            : "rect",
                "src"             : "images/silueta32.png",
                "renderOptions"   : {"width" : gridSpacing, "height" : gridSpacing, "fill": "#F7D08A"},
                "backgroundColor" : "#F7D08A"
            },
            {
                "id"              : n++,
                "name"            : "Selection Mark",
                "value"           : "selectionMark",
                "type"            : "mark",
                "src"             : "images/selection32.png",
                "renderOptions"   : {width: gridSpacing, height: gridSpacing, subtype: "mark", markStyle: "Square"},
            },
            {
                "id"              : n++,
                "name"            : "Separation Line",
                "value"           : "separationLine",
                "type"            : "separationLine",
                "src"             : "images/static32.png",
                "renderOptions"   : {left: gridSpacing, top: gridSpacing / 2, stroke: "rgb(0,0,0)", strokeWidth:1, subtype: "separationLine"},
            },
            {
                "id"              : n++,
                "name"            : "Static Text",
                "value"           : "static text",
                "type"            : "text",
                "src"             : "images/txt32.png",
                "renderOptions"   : {fontSize: 12},
                "backgroundColor" : "#F79F79"
            },
            {
                "id"              : n++,
                "name"            : "Custom Text",
                "value"           : "custom text",
                "type"            : "textbox",
                "src"             : "images/txt32.png",
                "renderOptions"   : {width: gridSpacing * 4, fontSize: 12},
                "backgroundColor" : "#F79F79"
            },
            {
                "id"              : n++,
                "name"            : "Static Image",
                "value"           : "custom",
                "type"            : "image",
                "src"             : "images/static32.png",
//                "renderOptions"   : {"left" : 0, "top" : 0, "fill": "#F7D08A", "imageUrl": "images/continueVoting.png"},
//                "renderOptions"   : {"left" : 0, "top" : 0, "fill": "#F7D08A", "imageUrl": "images/eac.png"},
//                "renderOptions"   : {"left" : 0, "top" : 0, "fill": "#F7D08A", "imageUrl": "images/arrow50.png"},
                "renderOptions"   : {"left" : 0, "top" : 0, "fill": "#F7D08A", "imageUrl": "images/instructionsGeneral.png"},
                "backgroundColor" : "#F7D08A"
            },
            {
                "id"              : n++,
                "name"            : "Static Image",
                "value"           : "custom",
                "type"            : "image",
                "src"             : "images/static32.png",
                "renderOptions"   : {"left" : 0, "top" : 0, "fill": "#F7D08A", "imageUrl": "images/instructionsWriteIn.png"},
                "backgroundColor" : "#F7D08A"
            },
            {
                "id"              : n++,
                "name"            : "Static Image",
                "value"           : "custom",
                "type"            : "image",
                "src"             : "images/static32.png",
                "renderOptions"   : {"left" : 0, "top" : 0, "fill": "#F7D08A", "imageUrl": "images/instructionsTurningIn.png"},
                "backgroundColor" : "#F7D08A"
            },
            {
                "id"              : n++,
                "name"            : "Static Image (QR)",
                "value"           : "custom",
                "type"            : "image",
                "src"             : "images/static32.png",
                "renderOptions"   : {"left" : 0, "top" : 0, "fill": "#F7D08A", "imageUrl": "images/qr154.png"},
                "backgroundColor" : "#F7D08A"
            }
            ];
        return mockData;
    }
    
    this.getContestClasses = function() {
        let n = 1;
        const mockData = [
            {
                "id"              : n++,
                "name"            : "President",
                "value"           : "President",
                "src"             : "http://placehold.it/32x32/E3F09B",
                "backgroundColor" : "#E3F09B"
            },
            {
                "id"              : n++,
                "name"            : "Senator",
                "value"           : "Senator",
                "src"             : "http://placehold.it/32x32/F7D08A",
                "backgroundColor" : "#F7D08A"
            },
            {
                "id"              : n++,
                "name"            : "Board Member",
                "value"           : "Board Member",
                "src"             : "http://placehold.it/32x32/87B6A7",
                "backgroundColor" : "#87B6A7"
            },
            {
                "id"              : n++,
                "name"            : "Attorney",
                "value"           : "Attorney",
                "src"             : "http://placehold.it/32x32/F79F79",
                "backgroundColor" : "#F79F79"
            },
            {
                "id"              : n++,
                "name"            : "Coroner",
                "value"           : "Coroner",
                "src"             : "http://placehold.it/32x32/5B5941",
                "backgroundColor" : "#5B5941"
            }
            ];
        return mockData;
    }
    
    this.getTemplateJsonDefinition = function() {
    	return {
	        "type": "group",
	        "originX": "left",
	        "originY": "top",
	        "left": 0,
	        "top": 0,
	        "width": 166,
	        "height": 152,
	        "fill": "rgb(0,0,0)",
	        "stroke": null,
	        "strokeWidth": 0,
	        "strokeDashArray": null,
	        "strokeLineCap": "butt",
	        "strokeLineJoin": "miter",
	        "strokeMiterLimit": 10,
	        "scaleX": 1,
	        "scaleY": 1,
	        "angle": 0,
	        "flipX": false,
	        "flipY": false,
	        "opacity": 0.9,
	        "shadow": null,
	        "visible": true,
	        "clipTo": null,
	        "backgroundColor": "",
	        "fillRule": "nonzero",
	        "globalCompositeOperation": "source-over",
	        "transformMatrix": null,
	        "skewX": 0,
	        "skewY": 0,
	        "id": 7163,
	        "objects": [{
	            "type": "rect",
	            "originX": "left",
	            "originY": "top",
	            "left": -75.5,
	            "top": -76,
	            "width": 165,
	            "height": 25,
	            "fill": "#f3f3f3",
	            "stroke": null,
	            "strokeWidth": 1,
	            "strokeDashArray": null,
	            "strokeLineCap": "butt",
	            "strokeLineJoin": "miter",
	            "strokeMiterLimit": 10,
	            "scaleX": 1,
	            "scaleY": 1,
	            "angle": 0,
	            "flipX": false,
	            "flipY": false,
	            "opacity": 0.7,
	            "shadow": null,
	            "visible": true,
	            "clipTo": null,
	            "backgroundColor": "",
	            "fillRule": "nonzero",
	            "globalCompositeOperation": "source-over",
	            "transformMatrix": null,
	            "skewX": 0,
	            "skewY": 0,
	            "rx": 0,
	            "ry": 0,
	            "stackable": true,
	            "subtype": "title",
	            "id": 3583
	          }, {
	            "type": "textbox",
	            "originX": "left",
	            "originY": "top",
	            "left": -75.5,
	            "top": -73,
	            "width": 165,
	            "height": 25,
	            "fill": "rgb(0,0,0)",
	            "stroke": null,
	            "strokeWidth": 1,
	            "strokeDashArray": null,
	            "strokeLineCap": "butt",
	            "strokeLineJoin": "miter",
	            "strokeMiterLimit": 10,
	            "scaleX": 1,
	            "scaleY": 1,
	            "angle": 0,
	            "flipX": false,
	            "flipY": false,
	            "opacity": 1,
	            "shadow": null,
	            "visible": true,
	            "clipTo": null,
	            "backgroundColor": "",
	            "fillRule": "nonzero",
	            "globalCompositeOperation": "source-over",
	            "transformMatrix": null,
	            "skewX": 0,
	            "skewY": 0,
	            "text": "${contest.name}",
	            "fontSize": 12,
	            "fontWeight": "bold",
	            "fontFamily": "Times New Roman",
	            "fontStyle": "",
	            "lineHeight": 1.16,
	            "textDecoration": "",
	            "textAlign": "left",
	            "textBackgroundColor": "",
	            "charSpacing": 0,
	            "minWidth": 20,
	            "customData": {
	              "display": "Contest title",
	              "contentType": "title"
	            },
	            "id": 8966,
	            "styles": {}
	          }, {
	            "type": "rect",
	            "originX": "left",
	            "originY": "top",
	            "left": -75.5,
	            "top": -51,
	            "width": 165,
	            "height": 25,
	            "fill": "#d9ecff",
	            "stroke": null,
	            "strokeWidth": 1,
	            "strokeDashArray": null,
	            "strokeLineCap": "butt",
	            "strokeLineJoin": "miter",
	            "strokeMiterLimit": 10,
	            "scaleX": 1,
	            "scaleY": 1,
	            "angle": 0,
	            "flipX": false,
	            "flipY": false,
	            "opacity": 0.7,
	            "shadow": null,
	            "visible": true,
	            "clipTo": null,
	            "backgroundColor": "",
	            "fillRule": "nonzero",
	            "globalCompositeOperation": "source-over",
	            "transformMatrix": null,
	            "skewX": 0,
	            "skewY": 0,
	            "rx": 0,
	            "ry": 0,
	            "stackable": true,
	            "subtype": "instructions",
	            "id": 9161
	          }, {
	            "type": "textbox",
	            "originX": "left",
	            "originY": "top",
	            "left": -75.5,
	            "top": -46,
	            "width": 165,
	            "height": 25,
	            "fill": "rgb(0,0,0)",
	            "stroke": null,
	            "strokeWidth": 1,
	            "strokeDashArray": null,
	            "strokeLineCap": "butt",
	            "strokeLineJoin": "miter",
	            "strokeMiterLimit": 10,
	            "scaleX": 1,
	            "scaleY": 1,
	            "angle": 0,
	            "flipX": false,
	            "flipY": false,
	            "opacity": 1,
	            "shadow": null,
	            "visible": true,
	            "clipTo": null,
	            "backgroundColor": "",
	            "fillRule": "nonzero",
	            "globalCompositeOperation": "source-over",
	            "transformMatrix": null,
	            "skewX": 0,
	            "skewY": 0,
	            "text": "Vote for ${contest.maxVotes}",
	            "fontSize": 12,
	            "fontWeight": "normal",
	            "fontFamily": "Times New Roman",
	            "fontStyle": "",
	            "lineHeight": 1.16,
	            "textDecoration": "",
	            "textAlign": "left",
	            "textBackgroundColor": "",
	            "charSpacing": 0,
	            "minWidth": 20,
	            "customData": {
	              "display": "Template instructions",
	              "contentType": "instructions"
	            },
	            "id": 242,
	            "styles": {}
	          }, {
	            "type": "group",
	            "originX": "left",
	            "originY": "top",
	            "left": -75.5,
	            "top": -26,
	            "width": 151,
	            "height": 51,
	            "fill": "rgb(0,0,0)",
	            "stroke": null,
	            "strokeWidth": 0,
	            "strokeDashArray": null,
	            "strokeLineCap": "butt",
	            "strokeLineJoin": "miter",
	            "strokeMiterLimit": 10,
	            "scaleX": 1,
	            "scaleY": 1,
	            "angle": 0,
	            "flipX": false,
	            "flipY": false,
	            "opacity": 0.9,
	            "shadow": null,
	            "visible": true,
	            "clipTo": null,
	            "backgroundColor": "",
	            "fillRule": "nonzero",
	            "globalCompositeOperation": "source-over",
	            "transformMatrix": null,
	            "skewX": 0,
	            "skewY": 0,
	            "id": 6045,
	            "subtype": "ballotOption",
	            "objects": [{
	                "type": "rect",
	                "originX": "left",
	                "originY": "top",
	                "left": -75.5,
	                "top": -25.5,
	                "width": 165,
	                "height": 50,
	                "fill": "#ffffff",
	                "stroke": null,
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 0.7,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "rx": 0,
	                "ry": 0,
	                "stackable": true,
	                "id": 1865,
	                "subtype": "ballotOption"
	              }, {
	                "type": "ellipse",
	                "originX": "left",
	                "originY": "top",
	                "left": -75.5,
	                "top": -18.5,
	                "width": 20,
	                "height": 10,
	                "fill": "rgba(0,0,0,0)",
	                "stroke": "black",
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 1,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "rx": 10,
	                "ry": 5,
	                "id": 2067,
	                "subtype": "mark"
	              }, {
	                "type": "textbox",
	                "originX": "left",
	                "originY": "top",
	                "left": -50.5,
	                "top": -18.5,
	                "width": 125,
	                "height": 25,
	                "fill": "rgb(0,0,0)",
	                "stroke": null,
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 1,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "text": "${nomination.ballotName}",
	                "fontSize": 12,
	                "fontWeight": "bold",
	                "fontFamily": "Times New Roman",
	                "fontStyle": "",
	                "lineHeight": 1.16,
	                "textDecoration": "",
	                "textAlign": "left",
	                "textBackgroundColor": "",
	                "charSpacing": 0,
	                "minWidth": 20,
	                "customData": {
	                  "display": "Candidate name",
	                  "contentType": "candidate"
	                },
	                "id": 5049,
	                "styles": {}
	              }, {
	                "type": "textbox",
	                "originX": "left",
	                "originY": "top",
	                "left": -50.5,
	                "top": -2.5,
	                "width": 125,
	                "height": 25,
	                "fill": "rgb(0,0,0)",
	                "stroke": null,
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 1,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "text": "${party.name}",
	                "fontSize": 12,
	                "fontWeight": "normal",
	                "fontFamily": "Times New Roman",
	                "fontStyle": "",
	                "lineHeight": 1.16,
	                "textDecoration": "",
	                "textAlign": "left",
	                "textBackgroundColor": "",
	                "charSpacing": 0,
	                "minWidth": 20,
	                "customData": {
	                  "display": "Party name",
	                  "contentType": "party"
	                },
	                "id": 1681,
	                "styles": {}
	              }, {
	                "type": "line",
	                "originX": "left",
	                "originY": "top",
	                "left": -50.5,
	                "top": 19.25,
	                "width": 140,
	                "height": 0,
	                "fill": "rgb(0,0,0)",
	                "stroke": "rgb(0,0,0)",
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 1,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "id": 5642,
	                "subtype": "separationLine",
	                "x1": -62.5,
	                "x2": 62.5,
	                "y1": 0,
	                "y2": 0
	              }
	            ]
	          }, {
	            "type": "group",
	            "originX": "left",
	            "originY": "top",
	            "left": -75.5,
	            "top": 24,
	            "width": 151,
	            "height": 51,
	            "fill": "rgb(0,0,0)",
	            "stroke": null,
	            "strokeWidth": 0,
	            "strokeDashArray": null,
	            "strokeLineCap": "butt",
	            "strokeLineJoin": "miter",
	            "strokeMiterLimit": 10,
	            "scaleX": 1,
	            "scaleY": 1,
	            "angle": 0,
	            "flipX": false,
	            "flipY": false,
	            "opacity": 0.9,
	            "shadow": null,
	            "visible": true,
	            "clipTo": null,
	            "backgroundColor": "",
	            "fillRule": "nonzero",
	            "globalCompositeOperation": "source-over",
	            "transformMatrix": null,
	            "skewX": 0,
	            "skewY": 0,
	            "id": 4610,
	            "subtype": "writeIn",
	            "objects": [{
	                "type": "rect",
	                "originX": "left",
	                "originY": "top",
	                "left": -75.5,
	                "top": -25.5,
	                "width": 165,
	                "height": 50,
	                "fill": "#ffffff",
	                "stroke": null,
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 0.7,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "rx": 0,
	                "ry": 0,
	                "stackable": true,
	                "id": 1789,
	                "subtype": "writeIn"
	              }, {
	                "type": "ellipse",
	                "originX": "left",
	                "originY": "top",
	                "left": -75.5,
	                "top": -18.5,
	                "width": 20,
	                "height": 10,
	                "fill": "rgba(0,0,0,0)",
	                "stroke": "black",
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 1,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "rx": 10,
	                "ry": 5,
	                "id": 6755,
	                "subtype": "mark"
	              }, {
	                "type": "text",
	                "originX": "left",
	                "originY": "top",
	                "left": -48.5,
	                "top": -19.5,
	                "width": 54,
	                "height": 13.56,
	                "fill": "rgb(0,0,0)",
	                "stroke": null,
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 1,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "text": "or write-in",
	                "fontSize": 12,
	                "fontWeight": "bold",
	                "fontFamily": "Times New Roman",
	                "fontStyle": "",
	                "lineHeight": 1.16,
	                "textDecoration": "",
	                "textAlign": "left",
	                "textBackgroundColor": "",
	                "charSpacing": 0,
	                "id": 9704
	              }, {
	                "type": "line",
	                "originX": "left",
	                "originY": "top",
	                "left": -50.5,
	                "top": 19.34,
	                "width": 140,
	                "height": 0,
	                "fill": "rgb(0,0,0)",
	                "stroke": "rgb(0,0,0)",
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 1,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "id": 446,
	                "subtype": "separationLine",
	                "x1": -62.5,
	                "x2": 62.5,
	                "y1": 0,
	                "y2": 0
	              }
	            ]
	          }, {
	            "type": "group",
	            "originX": "left",
	            "originY": "top",
	            "left": -75.5,
	            "top": -76,
	            "width": 151,
	            "height": 152,
	            "fill": "rgb(0,0,0)",
	            "stroke": null,
	            "strokeWidth": 0,
	            "strokeDashArray": null,
	            "strokeLineCap": "butt",
	            "strokeLineJoin": "miter",
	            "strokeMiterLimit": 10,
	            "scaleX": 1,
	            "scaleY": 1,
	            "angle": 0,
	            "flipX": false,
	            "flipY": false,
	            "opacity": 1,
	            "shadow": null,
	            "visible": true,
	            "clipTo": null,
	            "backgroundColor": "",
	            "fillRule": "nonzero",
	            "globalCompositeOperation": "source-over",
	            "transformMatrix": null,
	            "skewX": 0,
	            "skewY": 0,
	            "subtype": "contestBorders",
	            "objects": [{
	                "type": "line",
	                "originX": "left",
	                "originY": "top",
	                "left": -75.5,
	                "top": -76,
	                "width": 151,
	                "height": 0,
	                "fill": "rgb(0,0,0)",
	                "stroke": "rgb(0,0,0)",
	                "strokeWidth": 2,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 1,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "x1": -75.5,
	                "x2": 75.5,
	                "y1": 0,
	                "y2": 0
	              }, {
	                "type": "line",
	                "originX": "left",
	                "originY": "top",
	                "left": -75.5,
	                "top": -76,
	                "width": 0,
	                "height": 151,
	                "fill": "rgb(0,0,0)",
	                "stroke": "rgb(0,0,0)",
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 1,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "x1": 0,
	                "x2": 0,
	                "y1": -75.5,
	                "y2": 75.5
	              }, {
	                "type": "line",
	                "originX": "left",
	                "originY": "top",
	                "left": -75.5,
	                "top": 75,
	                "width": 151,
	                "height": 0,
	                "fill": "rgb(0,0,0)",
	                "stroke": "rgb(0,0,0)",
	                "strokeWidth": 1,
	                "strokeDashArray": null,
	                "strokeLineCap": "butt",
	                "strokeLineJoin": "miter",
	                "strokeMiterLimit": 10,
	                "scaleX": 1,
	                "scaleY": 1,
	                "angle": 0,
	                "flipX": false,
	                "flipY": false,
	                "opacity": 1,
	                "shadow": null,
	                "visible": true,
	                "clipTo": null,
	                "backgroundColor": "",
	                "fillRule": "nonzero",
	                "globalCompositeOperation": "source-over",
	                "transformMatrix": null,
	                "skewX": 0,
	                "skewY": 0,
	                "x1": -75.5,
	                "x2": 75.5,
	                "y1": 0,
	                "y2": 0
	              }
	            ]
	          }
	        ]
	      }
    }
    
    
    
    this.objectSelectedListener = function(element) {

        console.log('objectSelectedListener()');

//        if (service.connectorMode) {
//
//          if (element.target.type === 'node') {
//
//            $log.debug('objectSelectedListener() - element.target.type === node');
//
//            service.selectedObject = element.target;
//            service.activeObject = service.selectedObject;
//            service.selectedObject.set('selectable', true);
//            service.selectedObject.set('hasRotatingPoint', true);
//            service.selectedObject.set('hasBorders', service.rectDefaults.hasBorders);
//            service.selectedObject.set('cornerSize', service.rectDefaults.cornerSize);
//            service.selectedObject.set('transparentCorners', service.rectDefaults.transparentCorners);
//            service.selectedObject.setControlsVisibility({ 'tl': true, 'tr': true, 'br': true, 'bl': true });
//
//            service.canvas.renderAll();
//          }
//        }
    }
}]);

